<!DOCTYPE HTML>
<html>
<head>
    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <title>Multi-Snake: Lobby</title>
    <style>
        canvas{
            border: 1px solid black;
            margin-right: auto;
            margin-left: auto;
            display: block;
        }
        h1{
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Multi-Snake!</h1>
    <canvas id="game-canvas" height="500" width="500"></canvas>
    <script>
        var socket = io();
        var host = false;
        var gameStarted = false;
        var playerNum = -1;
        var playerList = [];
        var occupied = [];
        var canvas = document.getElementById("game-canvas");
        var ctx = canvas.getContext("2d");
        socket.on('host', function(){
            host = true;
        });
        socket.on('player', function(e){
            playerNum = e;
        });
        socket.on('playerList', function(e){
            playerList = e;
            renderPlayers();
        });
        $('body').on('keydown', function(e){
            if(playerNum < 4 && playerNum >= 0 && e.keyCode >= 37 && e.keyCode <= 40) {
                socket.emit('key', {
                    code: e.keyCode,
                    player: playerNum
                });
            }
        });

        //functions
        function renderPlayers(){
            for(var i in playerList){
                console.dir(playerList[i]);
                ctx.fillStyle = playerList[i].color;
                ctx.fillRect(playerList[i].pos.x*10,playerList[i].pos.y*10,10,10);
            }
        }
    </script>
</body>
</html>